{% extends "base.html" %}

{% block content %}

<div class="parkBanner">
    <img src="../static/images/zrmanja_banner.jpg" alt="" style="width: 100%; height: auto;">
</div>
<div class="jumbotron">
    <h1 class="display-4">Rafting on Zrmanja</h1>
    <p class="lead">Experience a wild ride through river rapids!</p>
    <hr class="my-4">
    <p>Click here to choose the type of your activity and calculate the price.</p>
    <a class="btn btn-primary btn-lg" href="{{ url_for('raftingCalculator')}}" role="button">Take the activity</a>
</div>

<div class="commentsSection">
    <div class="userExperienceTitle">
        <h1 class="display-4">User reviews of Zrmanja rafting</h1>
    </div>
    <div class="userExperience">

        <div class="columnLeft">
            <div class="card" style="width: 18rem;">
                <div class="hidden" id="picUserLeftID">{{user1.name}}</div>
                <img src="" id="picUserLeft" class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title">{{ user1.name }}</h5>
                    <p class="card-text">{{ user1.comment }}</p>
                    <div class="marks">
                        <div class="review">Review:</div>
                        Excitement: <div class="hidden" id="fillBarRightTopNum">{{ user1.excitement}}</div>
                        <div class="progress">
                            <div class="progress-bar bg-success" id="fillBarRightTop" role="progressbar" aria-valuenow="25"
                                aria-valuemin="0" aria-valuemax="100"></div>
                        </div>

                        Value: <div class="hidden" id="fillBarRightBottomNum">{{ user1.price}}</div>
                        <div class="progress">
                            <div class="progress-bar bg-primary" id="fillBarRightBottom" role="progressbar" style="width: 50%"
                                aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="columnRight">
            <div class="card" style="width: 18rem;">
                <div class="hidden" id="picUserRightID">{{user2.name}}</div>
                <img src="" id="picUserRight" class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title">{{ user2.name}}</h5>
                    <p class="card-text">{{ user2.comment}}</p>
                    <div class="marks">
                        <div class="review">Review:</div>
                        Excitement: <div class="hidden" id="fillBarLeftTopNum">{{ user2.excitement}}</div>
                        <div class="progress">
                            <div class="progress-bar bg-success" id="fillBarLeftTop" role="progressbar" style="width: 20%"
                                aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>

                        Value: <div class="hidden" id="fillBarLeftBottomNum">{{ user2.price}}</div>
                        <div class="progress">
                            <div class="progress-bar bg-primary" id="fillBarLeftBottom" role="progressbar" style="width: 70%"
                                aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="columnRight">


        </div>



    </div>


</div>

<script>
    
    function fillElements() {
        let elements = document.getElementsByClassName("progress-bar");

        for (let e of elements) {


            let barID = e.id;
            let barNumID = e.id + "Num";
            let barNumElem = document.getElementById(barNumID);
            let num = barNumElem.innerHTML


            fillPercent(barID, num);

        }
    }
    fillElements();
    changeLeftPicture();
    changeRightPicture();

    function changeLeftPicture() {
        let leftPicture = document.getElementById("picUserLeft");
        let username = document.getElementById("picUserLeftID").innerHTML;
        leftPicture.src = "../static/images/" + username + ".jpg";

    }

    function changeRightPicture() {
        let rightPicture = document.getElementById("picUserRight");
        let username = document.getElementById("picUserRightID").innerHTML;
        rightPicture.src = "../static/images/" + username + ".jpg";
    }

    function fillPercent(barID, num){

        let width = 1;
        let id = setInterval(frame, 2);
        let elem = document.getElementById(barID)

        function frame() {
            (width >= num) ? clearInterval(id) : width++; elem.style.width = width + '%'
            
        }

    }
</script>

{% endblock %}